!function a(i,t,n){function l(r,e){if(!t[r]){if(!i[r]){var o="function"==typeof require&&require;if(!e&&o)return o(r,!0);if(s)return s(r,!0);throw(o=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",o}o=t[r]={exports:{}},i[r][0].call(o.exports,function(e){return l(i[r][1][e]||e)},o,o.exports,a,i,t,n)}return t[r].exports}for(var s="function"==typeof require&&require,e=0;e<n.length;e++)l(n[e]);return l}({1:[function(e,r,o){"use strict";jQuery(document).ready(function(){var o=jQuery("#p15_booking_form").data("url"),r=jQuery("#tourSelect"),a=jQuery("#departureGroup"),i=jQuery("#departureList"),t=jQuery("#group_size_list");r.change(function(){var e=r.val();""===e?a.css("display","none"):a.css("display","block");e={tripId:e,action:"update_form"};jQuery.ajax({type:"POST",url:o,data:e}).done(function(e){var e=JSON.parse(e),a=e.Departures;e.PillonFriendly;i.html('<option value="">Select Departure Date</option>'),a.forEach(function(e){var r=new Date(e["@attributes"].startDate),o=new Date(e["@attributes"].endDate);i.append(jQuery("<option>",{value:e["@attributes"].id,text:r.toDateString()+" to "+o.toDateString()+" - "+e["@attributes"].availableSpaces+" Spots Left "}))}),i.change(function(){jQuery("#testJsValue").html("");var o=i.val();a.forEach(function(e){var r;e["@attributes"].id===o&&(r=e["@attributes"].availableSpaces,jQuery("#available_spaces").text(r),e.Prices.Price.forEach(function(e){jQuery("#testJsValue").append('<div class="extras-box"><input class="" type="checkbox" value="'+e["@attributes"].id+'" name="">'+e["@attributes"].name+": Â£"+e["@attributes"].amount+"</div>")}))}),t.html('<option value="1">Just Myself</option>');for(var e=jQuery("#available_spaces").text(),r=2;r<=e;)t.append('<option value="'+r+'">'+r+" Guests</option>"),r++})}).fail(function(e){console.log("Error")})}),t.change(function(){var e=t.val(),r=jQuery("#additionalGuests");r.html("");for(var o=2,a=2;o<=e;)r.append('<hr><div id="guest'+a+'" data-guestnum="'+a+'"><h4>Guest '+a+'</h4><input type="hidden" name="p15_guests.contact.'+a+'.isClient" value="true"><input type="hidden" name="p15_guests.contact.'+a+'.samehousehold" value="true">\x3c!-- FIRST NAME --\x3e<div id="firstname-group" class="p15-input-group"><input type="text" class="p15-input-control" name="firstname" placeholder="First name..." oninput="clearError(this)">\x3c!-- errors will go here --\x3e</div>\x3c!-- LAST NAME --\x3e<div id="lastname-group" class="p15-input-group"><input type="text" class="p15-input-control" name="lastname" placeholder="Last name..." oninput="clearError(this)">\x3c!-- errors will go here --\x3e</div><div class="p15-input-group"><select id="guestType'+a+'" class="p15-input-control"> <option value"">Guest Type</option><option value"Rider">Rider</option><option value"Pillion">Pillion</option></select></div>'),r.append('<div id="rider-fields'+a+'">\x3c!-- LICENSE --\x3e<div id="licensetype-group" class="p15-input-group"><label for="rideexp_motorcyclelicensetype" style="display:none">Motorcycle License Type <span style="color:red">*</span></label><select class="p15-input-control" name="rideexp_motorcyclelicensetype" oninput="clearError(this)"><option value="">License Type</option><option value="No License">No License</option><option value="Restricted">Restricted</option><option value="Unrestricted">Unrestricted</option></select></div>\x3c!-- errors will go here --\x3e\x3c!-- ROAD RIDING LEVEL --\x3e<div id="levelroad-group" class="p15-input-group"><label for="rideexp_roadridinglevel" style="display:none">Road Riding Level <span style="color:red">*</span></label><select class="p15-input-control" name="rideexp_roadridinglevel" oninput="clearError(this)"><option value="">Road Riding Level</option><option value="Beginner">Beginner</option><option value="Novice">Novice</option><option value="Competent">Competent</option><option value="Advanced">Advanced</option><option value="Valentino Rossi">Valentino Rossi</option></select></div>\x3c!-- errors will go here --\x3e\x3c!-- OFFROAD RIDING LEVEL --\x3e<div id="leveloffroad-group" class="p15-input-group"><label for="rideexp_offroadridinglevel" style="display:none">Off-Road Riding Level <span style="color:red">*</span></label><select class="p15-input-control" name="rideexp_offroadridinglevel" oninput="clearError(this)"><option value="">Off-Road Riding Level</option><option value="Beginner">Beginner</option><option value="Novice">Novice</option><option value="Competent">Competent</option><option value="Advanced">Advanced</option><option value="Graham Jarvis">Graham Jarvis</option></select></div>\x3c!-- errors will go here --\x3e\x3c!-- EXTRAS --\x3e<h4>Extras:</h4><div class="p15-checkbox-group"><div class="extras-box"><input class="" type="checkbox" value="" name=""> BMW R1250 GS: 700.00 GBP</div><div class="extras-box"><input class="" type="checkbox" value="" name=""> BMW F800 GS: 160.00 GBP</div><div class="extras-box"><input class="" type="checkbox" value="" name=""> Motorcycle Damage Excess Reduction: 390.00 GBP</div><div class="extras-box"><input class="" type="checkbox" value="" name=""> SRS - Rider: 1,685.00 GBP</div></div></div></div>'),o++,a++}),jQuery("#peak-15-form").submit(function(e){jQuery("#formNextSubmit").attr("disabled","disabled"),jQuery(".form-group").removeClass("p15-error"),jQuery(".p15-input-notif").remove(),console.log("Booking Form submitted.");var r={formname:jQuery("input[name=formname]").val(),pagename:jQuery("input[name=pagename]").val(),statuscode:jQuery("input[name=statuscode]").val(),rule:jQuery("input[name=rule]").val(),ruletype:jQuery("input[name=ruletype]").val(),contacttype:jQuery("input[name=contacttype]").val(),action:jQuery("input[name=action]").val(),firstname:jQuery("input[name=firstname]").val(),lastname:jQuery("input[name=lastname]").val(),email:jQuery("input[name=email]").val(),telephone1:jQuery("input[name=telephone1]").val(),rideexp_motorcyclelicensetype:jQuery("select[name=rideexp_motorcyclelicensetype]").val(),rideexp_licenseheldsince:jQuery("input[name=rideexp_licenseheldsince]").val(),rideexp_roadridinglevel:jQuery("select[name=rideexp_roadridinglevel]").val(),rideexp_offroadridinglevel:jQuery("select[name=rideexp_offroadridinglevel]").val()};console.log(r),jQuery.ajax({type:"POST",url:o,data:r,dataType:"json",encode:!0}).done(function(e){console.log(e),e.success?jQuery("#peak-15-form").html('<div class="p15-message p15-message-success">'+e.message+"</div>"):(jQuery("#formNextSubmit").removeAttr("disabled","disabled"),e.errors.validation&&jQuery("#peak-15-form").html('<div class="p15-message p15-message-error"><b>'+e.errors.validation+"</b><br>"+e.message+"</div>"),e.errors.firstname&&(jQuery("#firstname-group").addClass("p15-error"),jQuery("#firstname-group").append('<div class="p15-input-notif"><small>'+e.errors.firstname+"</small></div>")),e.errors.lastname&&(jQuery("#lastname-group").addClass("p15-error"),jQuery("#lastname-group").append('<div class="p15-input-notif"><small>'+e.errors.lastname+"</small></div>")),e.errors.email&&(jQuery("#email-group").addClass("p15-error"),jQuery("#email-group").append('<div class="p15-input-notif"><small>'+e.errors.email+"</small></div>")),e.errors.telephone1&&(jQuery("#phone-group").addClass("p15-error"),jQuery("#phone-group").append('<div class="p15-input-notif"><small>'+e.errors.telephone1+"</small></div>")),e.errors.p15_groupsize&&(jQuery("#groupsize-group").addClass("p15-error"),jQuery("#groupsize-group").append('<div class="p15-input-notif"><small>'+e.errors.p15_groupsize+"</small></div>")),e.errors.rideexp_motorcyclelicensetype&&(jQuery("#licensetype-group").addClass("p15-error"),jQuery("#licensetype-group").append('<div class="p15-input-notif"><small>'+e.errors.rideexp_motorcyclelicensetype+"</small></div>")),e.errors.rideexp_licenseheldsince&&(jQuery("#licensesince-group").addClass("p15-error"),jQuery("#licensesince-group").append('<div class="p15-input-notif"><small>'+e.errors.rideexp_licenseheldsince+"</small></div>")),e.errors.rideexp_roadridinglevel&&(jQuery("#levelroad-group").addClass("p15-error"),jQuery("#levelroad-group").append('<div class="p15-input-notif"><small>'+e.errors.rideexp_roadridinglevel+"</small></div>")),e.errors.rideexp_offroadridinglevel&&(jQuery("#leveloffroad-group").addClass("p15-error"),jQuery("#leveloffroad-group").append('<div class="p15-input-notif"><small>'+e.errors.rideexp_offroadridinglevel+"</small></div>")))}).fail(function(e){jQuery("#peak-15-form").html('<div class="p15-message p15-message-error">Sorry, your form was not sent, please try again later.</div>')}),e.preventDefault()})})},{}]},{},[1]);
//# sourceMappingURL=peak15link-ajax-bookings.min.js.map
