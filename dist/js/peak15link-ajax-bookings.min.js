!function i(o,a,n){function s(r,e){if(!a[r]){if(!o[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(l)return l(r,!0);throw(t=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",t}t=a[r]={exports:{}},o[r][0].call(t.exports,function(e){return s(o[r][1][e]||e)},t,t.exports,i,o,a,n)}return a[r].exports}for(var l="function"==typeof require&&require,e=0;e<n.length;e++)s(n[e]);return s}({1:[function(e,r,t){"use strict";jQuery(document).ready(function(){var a,n,s,l,p,d,t=jQuery("#p15_booking_form").data("url"),i=jQuery("#tourSelect"),u=jQuery("#departureGroup"),c=jQuery("#departureList"),v=jQuery("#departureInfo"),m=jQuery("#departureNotices"),g=jQuery("#pillionFriendly"),y=jQuery("#tripPriceInfo"),f=jQuery("#mainGuestExtras"),h=jQuery("#additionalGuests"),x=jQuery("#guestFormNotices"),b=jQuery("#addGuest"),j={style:"currency",currency:"GBP"};i.change(function(){v.css("display","none"),u.css("display","none"),m.html("");var r=i.val(),e={tripId:r,action:"update_form"};jQuery.ajax({type:"POST",url:t,data:e}).done(function(e){var e=JSON.parse(e),o=e.Departures,t=e.PillonFriendly;c.html('<option value="">Select Departure Date...</option>'),o.forEach(function(e){var r=new Date(e["@attributes"].startDate),t=new Date(e["@attributes"].endDate),i=e["@attributes"].id;l="0"===e["@attributes"].availableSpaces?"SOLD OUT":e["@attributes"].availableSpaces,c.append(jQuery("<option>",{value:i,text:r.toDateString()+" to "+t.toDateString()+" - Spots Left: "+l}))}),""===r?u.css("display","none"):u.css("display","block"),c.change(function(){y.html(""),m.html(""),f.html(""),h.html(""),x.html(""),b.html("");var e,i=c.val();function r(t,e){switch(e){case"pillion":console.log("This is a pillion!");break;case"rider":console.log("This is a rider!");break;default:console.log("Only riders allowed!")}o.forEach(function(e){var r;e["@attributes"].id===i&&(a=e.Prices.Price,r=2,a.forEach(function(e){"Pillion Base Price"!=e["@attributes"].category&&"Rider Base Price"!=e["@attributes"].category&&"SRS - Pillion"!=e["@attributes"].name&&(console.log(e["@attributes"].category+": "+e["@attributes"].name+" - "+e["@attributes"].amount),jQuery("#guestExtras"+t).append('<div class="extras-box"><input type="hidden" name="p15_guests.contact.'+t+".p15_vendorserviceitemres."+r+'" value="BMW R1250 GS"><input class="" type="checkbox" value="'+e["@attributes"].id+'" name="'+r+'"> '+e["@attributes"].name+": "+new Number(e["@attributes"].amount).toLocaleString("en-GB",j)+"</div>"),r++)}))})}jQuery("input[name=departure_guid]").val(i),o.forEach(function(e){if(e["@attributes"].id===i){if(l=e["@attributes"].availableSpaces,jQuery("#availableSpaces").text(l),"0"===l)return v.css("display","none"),void m.html('<div class="p15-message p15-message-error">Sorry, this date is sold out. Please select another date or send us an email to enquire about cancellations for this date.</div>');a=e.Prices.Price;var t=1;a.forEach(function(e){var r;"Rider Base Price"===e["@attributes"].category&&(n=new Number(e["@attributes"].amount).toLocaleString("en-GB",j),s=e["@attributes"].id,y.append('<p><b>Rider Price:</b> <span id="riderPrice">'+n+"</span></p>"),jQuery("#bookedRiderPrice").val(s)),"Pillion Base Price"===e["@attributes"].category&&(r=new Number(e["@attributes"].amount).toLocaleString("en-GB",j),y.append('<p><b>Pillion Price:</b> <span id="pillionPrice">'+r+"</span></p>")),"Pillion Base Price"!=e["@attributes"].category&&"Rider Base Price"!=e["@attributes"].category&&"SRS - Pillion"!=e["@attributes"].name&&(console.log(e["@attributes"].category+": "+e["@attributes"].name+" - "+e["@attributes"].amount),f.append('<div class="extras-box"><input type="hidden" name="p15_guests.contact.1.p15_vendorserviceitemres.'+t+'" value="BMW R1250 GS"><input class="" type="checkbox" value="'+e["@attributes"].id+'" name="'+t+'"> '+e["@attributes"].name+": "+new Number(e["@attributes"].amount).toLocaleString("en-GB",j)+"</div>"),t++)})}}),g.text(t),"Yes"===t&&1<l?(b.html('<button class="p15-btn" type="button" id="addRider"><i class="fas fa-plus-square" style="margin-right:0.25rem;"></i> Add Rider</button><button class="p15-btn" type="button" id="addPillion"><i class="fas fa-plus-square" style="margin-right:0.25rem;"></i> Add Pillon</button>'),p=jQuery("#addRider"),d=jQuery("#addPillion"),e=2,p.click(function(){e<=l&&(console.log("Counter: "+e+". Spots Left: "+l),h.append('<div id="guest'+e+'" class="rider-form"><h4>Guest '+e+' (Rider)</h4><input type="hidden" name="p15_guests.contact.'+e+'.isClient" value="true"><input type="hidden" id="bookedRiderPrice'+e+'" name="p15_guests.contact.'+e+'.p15_tripprices.1" value=""><input type="hidden" name="p15_guests.contact.'+e+'.samehousehold" value="false">\x3c!-- FIRST NAME --\x3e<div id="firstname-group" class="p15-input-group"><input type="text" class="p15-input-control" name="firstname" placeholder="First name..." oninput="clearError(this)">\x3c!-- errors will go here --\x3e</div>\x3c!-- LAST NAME --\x3e<div id="lastname-group" class="p15-input-group"><input type="text" class="p15-input-control" name="lastname" placeholder="Last name..." oninput="clearError(this)">\x3c!-- errors will go here --\x3e</div><div id="rider-fields'+e+'">\x3c!-- LICENSE --\x3e<div id="licensetype-group" class="p15-input-group"><label for="rideexp_motorcyclelicensetype" style="display:none">Motorcycle License Type <span style="color:red">*</span></label><select class="p15-input-control" name="rideexp_motorcyclelicensetype" oninput="clearError(this)"><option value="">License Type</option><option value="No License">No License</option><option value="Restricted">Restricted</option><option value="Unrestricted">Unrestricted</option></select></div>\x3c!-- errors will go here --\x3e\x3c!-- ROAD RIDING LEVEL --\x3e<div id="levelroad-group" class="p15-input-group"><label for="rideexp_roadridinglevel" style="display:none">Road Riding Level <span style="color:red">*</span></label><select class="p15-input-control" name="rideexp_roadridinglevel" oninput="clearError(this)"><option value="">Road Riding Level</option><option value="Beginner">Beginner</option><option value="Novice">Novice</option><option value="Competent">Competent</option><option value="Advanced">Advanced</option><option value="Valentino Rossi">Valentino Rossi</option></select></div>\x3c!-- errors will go here --\x3e\x3c!-- OFFROAD RIDING LEVEL --\x3e<div id="leveloffroad-group" class="p15-input-group"><label for="rideexp_offroadridinglevel" style="display:none">Off-Road Riding Level <span style="color:red">*</span></label><select class="p15-input-control" name="rideexp_offroadridinglevel" oninput="clearError(this)"><option value="">Off-Road Riding Level</option><option value="Beginner">Beginner</option><option value="Novice">Novice</option><option value="Competent">Competent</option><option value="Advanced">Advanced</option><option value="Graham Jarvis">Graham Jarvis</option></select></div>\x3c!-- errors will go here --\x3e\x3c!-- EXTRAS --\x3e<h4>Extras:</h4><div id="guestExtras'+e+'" class="p15-checkbox-group extras-area"></div></div></div><hr>'),r(e,"rider"),e++),l<e&&x.html('<div class="p15-message p15-message-error"><small>Max number of guests reached for this tour.</small></div>')}),d.click(function(){e<=l&&(console.log("Counter: "+e+". Spots Left: "+l),h.append('<div id="guest'+e+'" class="pillion-form"><h4>Guest '+e+' (Pillion)</h4><input type="hidden" name="p15_guests.contact.'+e+'.isClient" value="true"><input type="hidden" id="bookedPillionPrice'+e+'" name="p15_guests.contact.'+e+'.p15_tripprices.1" value=""><input type="hidden" name="p15_guests.contact.'+e+'.samehousehold" value="false">\x3c!-- FIRST NAME --\x3e<div id="firstname-group" class="p15-input-group"><input type="text" class="p15-input-control" name="firstname" placeholder="First name..." oninput="clearError(this)">\x3c!-- errors will go here --\x3e</div>\x3c!-- LAST NAME --\x3e<div id="lastname-group" class="p15-input-group"><input type="text" class="p15-input-control" name="lastname" placeholder="Last name..." oninput="clearError(this)">\x3c!-- errors will go here --\x3e</div>\x3c!-- EXTRAS --\x3e<h4>Extras:</h4><div id="guestExtras'+e+'" class="p15-checkbox-group extras-area"></div></div><hr>'),r(e,"pillion"),e++),l<e&&x.html('<div class="p15-message p15-message-error"><small>Max number of guests reached for this tour.</small></div>')})):"No"===t&&1<l?(b.html('<button class="p15-btn" type="button" id="addRider"><i class="fas fa-plus-square" style="margin-right:0.25rem;"></i> Add Rider</button>'),p=jQuery("#addRider"),e=2,p.click(function(){e<=l&&(console.log("Counter: "+e+". Spots Left: "+l),h.append('<div id="guest'+e+'" class="rider-form"><h4>Guest '+e+' (Rider)</h4><input type="hidden" name="p15_guests.contact.'+e+'.isClient" value="true"><input type="hidden" name="p15_guests.contact.'+e+'.samehousehold" value="false">\x3c!-- FIRST NAME --\x3e<div id="firstname-group" class="p15-input-group"><input type="text" class="p15-input-control" name="firstname" placeholder="First name..." oninput="clearError(this)">\x3c!-- errors will go here --\x3e</div>\x3c!-- LAST NAME --\x3e<div id="lastname-group" class="p15-input-group"><input type="text" class="p15-input-control" name="lastname" placeholder="Last name..." oninput="clearError(this)">\x3c!-- errors will go here --\x3e</div><div id="rider-fields'+e+'">\x3c!-- LICENSE --\x3e<div id="licensetype-group" class="p15-input-group"><label for="rideexp_motorcyclelicensetype" style="display:none">Motorcycle License Type <span style="color:red">*</span></label><select class="p15-input-control" name="rideexp_motorcyclelicensetype" oninput="clearError(this)"><option value="">License Type</option><option value="No License">No License</option><option value="Restricted">Restricted</option><option value="Unrestricted">Unrestricted</option></select></div>\x3c!-- errors will go here --\x3e\x3c!-- ROAD RIDING LEVEL --\x3e<div id="levelroad-group" class="p15-input-group"><label for="rideexp_roadridinglevel" style="display:none">Road Riding Level <span style="color:red">*</span></label><select class="p15-input-control" name="rideexp_roadridinglevel" oninput="clearError(this)"><option value="">Road Riding Level</option><option value="Beginner">Beginner</option><option value="Novice">Novice</option><option value="Competent">Competent</option><option value="Advanced">Advanced</option><option value="Valentino Rossi">Valentino Rossi</option></select></div>\x3c!-- errors will go here --\x3e\x3c!-- OFFROAD RIDING LEVEL --\x3e<div id="leveloffroad-group" class="p15-input-group"><label for="rideexp_offroadridinglevel" style="display:none">Off-Road Riding Level <span style="color:red">*</span></label><select class="p15-input-control" name="rideexp_offroadridinglevel" oninput="clearError(this)"><option value="">Off-Road Riding Level</option><option value="Beginner">Beginner</option><option value="Novice">Novice</option><option value="Competent">Competent</option><option value="Advanced">Advanced</option><option value="Graham Jarvis">Graham Jarvis</option></select></div>\x3c!-- errors will go here --\x3e\x3c!-- EXTRAS --\x3e<h4>Extras:</h4><div id="guestExtras'+e+'" class="p15-checkbox-group extras-area"></div></div></div><hr>'),r(e),e++),l<e&&x.html('<div class="p15-message p15-message-error"><small>Max number of guests reached for this tour.</small></div>')})):x.html('<div class="p15-message p15-message-warn"><small><b>Please Note:</b> This is the last spot available for this date.</small></div>'),""===c?v.css("display","none"):v.css("display","block")})}).fail(function(e){console.log("Error")})}),jQuery("#peak-15-form").submit(function(e){jQuery("#formNextSubmit").attr("disabled","disabled"),jQuery(".form-group").removeClass("p15-error"),jQuery(".p15-input-notif").remove(),console.log("Booking Form submitted.");var r={formname:jQuery("input[name=formname]").val(),pagename:jQuery("input[name=pagename]").val(),statuscode:jQuery("input[name=statuscode]").val(),rule:jQuery("input[name=rule]").val(),ruletype:jQuery("input[name=ruletype]").val(),contacttype:jQuery("input[name=contacttype]").val(),action:jQuery("input[name=action]").val(),firstname:jQuery("input[name=firstname]").val(),lastname:jQuery("input[name=lastname]").val(),email:jQuery("input[name=email]").val(),telephone1:jQuery("input[name=telephone1]").val(),rideexp_motorcyclelicensetype:jQuery("select[name=rideexp_motorcyclelicensetype]").val(),rideexp_licenseheldsince:jQuery("input[name=rideexp_licenseheldsince]").val(),rideexp_roadridinglevel:jQuery("select[name=rideexp_roadridinglevel]").val(),rideexp_offroadridinglevel:jQuery("select[name=rideexp_offroadridinglevel]").val()};console.log(r),jQuery.ajax({type:"POST",url:t,data:r,dataType:"json",encode:!0}).done(function(e){console.log(e),e.success?jQuery("#peak-15-form").html('<div class="p15-message p15-message-success">'+e.message+"</div>"):(jQuery("#formNextSubmit").removeAttr("disabled","disabled"),e.errors.validation&&jQuery("#peak-15-form").html('<div class="p15-message p15-message-error"><b>'+e.errors.validation+"</b><br>"+e.message+"</div>"),e.errors.firstname&&(jQuery("#firstname-group").addClass("p15-error"),jQuery("#firstname-group").append('<div class="p15-input-notif"><small>'+e.errors.firstname+"</small></div>")),e.errors.lastname&&(jQuery("#lastname-group").addClass("p15-error"),jQuery("#lastname-group").append('<div class="p15-input-notif"><small>'+e.errors.lastname+"</small></div>")),e.errors.email&&(jQuery("#email-group").addClass("p15-error"),jQuery("#email-group").append('<div class="p15-input-notif"><small>'+e.errors.email+"</small></div>")),e.errors.telephone1&&(jQuery("#phone-group").addClass("p15-error"),jQuery("#phone-group").append('<div class="p15-input-notif"><small>'+e.errors.telephone1+"</small></div>")),e.errors.p15_groupsize&&(jQuery("#groupsize-group").addClass("p15-error"),jQuery("#groupsize-group").append('<div class="p15-input-notif"><small>'+e.errors.p15_groupsize+"</small></div>")),e.errors.rideexp_motorcyclelicensetype&&(jQuery("#licensetype-group").addClass("p15-error"),jQuery("#licensetype-group").append('<div class="p15-input-notif"><small>'+e.errors.rideexp_motorcyclelicensetype+"</small></div>")),e.errors.rideexp_licenseheldsince&&(jQuery("#licensesince-group").addClass("p15-error"),jQuery("#licensesince-group").append('<div class="p15-input-notif"><small>'+e.errors.rideexp_licenseheldsince+"</small></div>")),e.errors.rideexp_roadridinglevel&&(jQuery("#levelroad-group").addClass("p15-error"),jQuery("#levelroad-group").append('<div class="p15-input-notif"><small>'+e.errors.rideexp_roadridinglevel+"</small></div>")),e.errors.rideexp_offroadridinglevel&&(jQuery("#leveloffroad-group").addClass("p15-error"),jQuery("#leveloffroad-group").append('<div class="p15-input-notif"><small>'+e.errors.rideexp_offroadridinglevel+"</small></div>")))}).fail(function(e){jQuery("#peak-15-form").html('<div class="p15-message p15-message-error">Sorry, your form was not sent, please try again later.</div>')}),e.preventDefault()})})},{}]},{},[1]);
//# sourceMappingURL=peak15link-ajax-bookings.min.js.map
